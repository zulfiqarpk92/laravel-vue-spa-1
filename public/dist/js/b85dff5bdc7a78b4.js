"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[478,144,236],{6144:(t,e,s)=>{s.r(e),s.d(e,{default:()=>n});const a={props:{invoiceItems:{type:Array,default:function(){return[]}},edit:{type:Boolean,default:!1}},data:function(){return{}},watch:{},mounted:function(){},methods:{removeItem:function(t){this.$emit("itemRemoved",t)}}};const n=(0,s(1900).Z)(a,(function(){var t=this,e=t._self._c;return e("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){var s,a,n,i;return[e("thead",[e("tr",[t.edit?e("th",{staticStyle:{width:"100px"}}):t._e(),t._v(" "),e("th",{staticStyle:{width:"100px"}},[t._v("\n          Item #\n        ")]),t._v(" "),e("th",[t._v("Name")]),t._v(" "),e("th",{staticStyle:{width:"100px"}},[t._v("\n          Price\n        ")]),t._v(" "),e("th",{staticStyle:{width:"100px"}},[t._v("\n          Qty\n        ")]),t._v(" "),e("th",{staticStyle:{width:"100px"}},[t._v("\n          Total\n        ")])])]),t._v(" "),e("tbody",t._l(t.invoiceItems,(function(s){return e("tr",{key:s.id,class:{"red lighten-5":s.salePrice<=s.costPrice}},[t.edit?e("td",[e("v-btn",{staticClass:"ma-2",attrs:{text:"",icon:"",color:"red"},on:{click:function(e){return t.removeItem(s.id)}}},[e("v-icon",[t._v("\n              mdi-delete\n            ")])],1)],1):t._e(),t._v(" "),e("td",[t._v(t._s(s.itemId||"-"))]),t._v(" "),e("td",[t._v(t._s(s.itemName))]),t._v(" "),e("td",[t.edit?e("v-text-field",{attrs:{type:"number"},model:{value:s.salePrice,callback:function(e){t.$set(s,"salePrice",e)},expression:"item.salePrice"}}):e("span",[t._v(t._s(t._f("currency")(s.salePrice)))])],1),t._v(" "),e("td",[t.edit?e("v-text-field",{attrs:{type:"number"},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",e)},expression:"item.quantity"}}):e("span",[t._v(t._s(t._f("showNumber")(s.quantity)))])],1),t._v(" "),e("td",[t._v(t._s(t._f("currency")(parseFloat(s.salePrice*s.quantity))))])])})),0),t._v(" "),t.edit?e("tfoot",[e("tr",[e("th"),t._v(" "),e("th"),t._v(" "),e("th"),t._v(" "),e("th"),t._v(" "),e("th",[t._v(t._s(t._f("showNumber")(null!==(s=null===(a=t.invoiceItems)||void 0===a?void 0:a.reduce((function(t,e){return t+parseFloat(e.quantity)}),0))&&void 0!==s?s:0)))]),t._v(" "),e("th",[t._v(t._s(t._f("currency")(null!==(n=null===(i=t.invoiceItems)||void 0===i?void 0:i.reduce((function(t,e){return t+parseFloat(e.salePrice*e.quantity)}),0))&&void 0!==n?n:0)))])])]):t._e()]},proxy:!0}])})}),[],!1,null,null,null).exports},4236:(t,e,s)=>{s.r(e),s.d(e,{default:()=>n});const a={props:{salePayments:{type:Array,default:function(){return[]}},edit:{type:Boolean,default:!1}},methods:{removeItem:function(t){var e=this;this.$confirm.fire({icon:"warning",title:"Delete Confirm",text:"Are you sure you want to delete this payment?",showCloseButton:!0,showCancelButton:!0,confirmButtonText:"Confirm",cancelButtonText:"Cancel"}).then((function(s){s.isConfirmed&&e.$http.delete("/api/payments/".concat(t)).then((function(t){var s=t.data;e.$store.dispatch("snackbar/showMessage",s.message),e.$emit("paymentRemoved",!0)}))}))}}};const n=(0,s(1900).Z)(a,(function(){var t=this,e=t._self._c;return e("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[t.edit?e("th",{staticStyle:{width:"100px"}}):t._e(),t._v(" "),e("th",{staticStyle:{width:"160px"}},[t._v("\n          Date\n        ")]),t._v(" "),e("th",[t._v("Description")]),t._v(" "),e("th",[t._v("Reference")]),t._v(" "),e("th",{staticStyle:{width:"150px"}},[t._v("\n          Mode\n        ")]),t._v(" "),e("th",{staticStyle:{width:"100px"}},[t._v("\n          Amount\n        ")])])]),t._v(" "),e("tbody",t._l(t.salePayments,(function(s){return e("tr",{key:s.id},[t.edit?e("td",[e("v-btn",{staticClass:"ma-2",attrs:{text:"",icon:"",color:"red"},on:{click:function(e){return t.removeItem(s.id)}}},[e("v-icon",[t._v("\n              mdi-delete\n            ")])],1)],1):t._e(),t._v(" "),e("td",[t._v(t._s(s.paymentTime||"-"))]),t._v(" "),e("td",[t._v(t._s(s.description||"-"))]),t._v(" "),e("td",[t._v(t._s(s.reference))]),t._v(" "),e("td",[t._v(t._s(s.paymentMode))]),t._v(" "),e("td",[t._v(t._s(t._f("currency")(s.amount)))])])})),0)]},proxy:!0}])})}),[],!1,null,null,null).exports},478:(t,e,s)=>{s.r(e),s.d(e,{default:()=>l});var a=s(6144),n=s(4236);const i={name:"ViewSale",components:{InvoiceItems:a.default,SalePayments:n.default},middleware:"auth",props:{saleId:{type:[String,Number],default:""}},data:function(){return{loading:!1,sale:{}}},mounted:function(){this.saleId&&this.loadData()},methods:{loadData:function(){var t=this;this.loading=!0,this.$http.get("/api/sales/"+this.saleId).then((function(e){var s=e.data;t.sale=s.data,t.loading=!1})).catch((function(e){console.log(e),t.loading=!1}))}}};const l=(0,s(1900).Z)(i,(function(){var t=this,e=t._self._c;return e("v-row",[e("v-col",{attrs:{cols:"12",md:"9"}},[e("v-card",[e("v-card-text",{staticClass:"py-9 px-8"},[e("div",{staticClass:"d-flex flex-wrap justify-space-between flex-column flex-sm-row"},[e("div",{staticClass:"mb-8 mb-sm-0"},[e("div",{staticClass:"d-flex align-center mb-6"},[e("v-img",{attrs:{"lazy-src":"https://picsum.photos/id/11/10/6","max-height":"30","max-width":"30",src:"https://picsum.photos/id/11/500/300"}}),t._v(" "),e("span",{staticClass:"text--primary font-weight-bold text-xl ml-6"},[t._v(" "+t._s(t.$settings.company)+" ")])],1),t._v(" "),e("div",{staticClass:"d-block"},[t._v("\n              "+t._s(t.$settings.address)+"\n            ")]),t._v(" "),e("div",{staticClass:"d-block"},[e("strong",[t._v("Phone: ")]),t._v(t._s(t.$settings.phone)+"\n            ")]),t._v(" "),e("div",{staticClass:"d-block"},[e("strong",[t._v("Email: ")]),t._v(t._s(t.$settings.email)+"\n            ")]),t._v(" "),e("div",{staticClass:"d-block"},[e("strong",[t._v("Website: ")]),t._v(t._s(t.$settings.website)+"\n            ")])]),t._v(" "),e("div",[e("p",{staticClass:"font-weight-medium text-xl text--primary mb-4"},[t._v("\n              Invoice # "+t._s(t.sale.id)+"\n            ")]),t._v(" "),e("p",{staticClass:"mb-2"},[e("span",[t._v("Date Issued: ")]),t._v(" "),e("span",{staticClass:"font-weight-semibold"},[t._v(t._s(t.sale.saleTime))])]),t._v(" "),e("p",{staticClass:"mb-2"},[e("span",[t._v("Due Date: ")]),t._v(" "),e("span",{staticClass:"font-weight-semibold"},[t._v(t._s(t.sale.dueDate)+"1")])])])])]),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",{staticClass:"py-9 px-8"},[e("div",{staticClass:"payment-details d-flex justify-space-between flex-wrap flex-column flex-sm-row"},[t.sale.customer?e("div",{staticClass:"mb-8 mb-sm-0"},[e("p",{staticClass:"font-weight-semibold payment-details-header"},[t._v("\n              Invoice To:\n            ")]),t._v(" "),e("p",{staticClass:"mb-1"},[t._v("\n              "+t._s(t.sale.customer.name)+"\n            ")]),t._v(" "),t.sale.customer.companyName?e("p",{staticClass:"mb-1"},[t._v("\n              "+t._s(t.sale.customer.companyName)+"\n            ")]):t._e(),t._v(" "),t.sale.customer.address?e("p",{staticClass:"mb-1"},[t._v("\n              "+t._s(t.sale.customer.address)+"\n            ")]):t._e(),t._v(" "),t.sale.customer.city||t.sale.customer.province?e("p",{staticClass:"mb-1"},[t._v("\n              "+t._s(t.sale.customer.city)+", "+t._s(t.sale.customer.province)+"\n            ")]):t._e(),t._v(" "),t.sale.customer.phone?e("p",{staticClass:"mb-1"},[t._v("\n              "+t._s(t.sale.customer.phone)+"\n            ")]):t._e(),t._v(" "),t.sale.customer.email?e("p",{staticClass:"mb-1"},[t._v("\n              "+t._s(t.sale.customer.email)+"\n            ")]):t._e()]):t._e()])]),t._v(" "),e("invoice-items",{attrs:{"invoice-items":t.sale.items}}),t._v(" "),e("v-divider",{staticClass:"mb-2"}),t._v(" "),e("h5",{staticClass:"ml-6 mb-2"},[t._v("\n        Payments\n      ")]),t._v(" "),e("sale-payments",{attrs:{"sale-payments":t.sale.payments}}),t._v(" "),e("v-card-text",{staticClass:"py-9 px-8"},[e("div",{staticClass:"invoice-total d-flex justify-space-between flex-column flex-sm-row"},[e("div",{staticClass:"mb-2 mb-sm-0"},[e("p",{staticClass:"mb-1"},[e("span",{staticClass:"font-weight-semibold"},[t._v("Salesperson: ")]),t._v(" "),e("span",[t._v(t._s(t.sale.createdBy))])]),t._v(" "),e("p",[t._v("Thanks for your business")]),t._v(" "),e("p",[e("strong",[t._v("Comments: ")]),t._v(" "+t._s(t.sale.comments))])]),t._v(" "),e("div",[e("table",[e("tr",[e("td",{staticClass:"pe-16"},[t._v("\n                  Total:\n                ")]),t._v(" "),e("th",{staticClass:"text-right"},[t._v("\n                  "+t._s(t._f("currency")(t.sale.totalAmount))+"\n                ")])]),t._v(" "),e("tr",[e("td",{staticClass:"pe-16"},[t._v("\n                  Payment:\n                ")]),t._v(" "),e("th",{staticClass:"text-right"},[t._v("\n                  "+t._s(t._f("currency")(t.sale.amountPaid))+"\n                ")])])]),t._v(" "),e("hr",{staticClass:"mt-4 mb-3 v-divider theme--light",attrs:{role:"separator","aria-orientation":"horizontal"}}),t._v(" "),e("table",{staticClass:"w-full"},[e("tr",[e("td",{staticClass:"pe-16"},[t._v("\n                  Balance:\n                ")]),t._v(" "),e("th",{staticClass:"text-right"},[t._v("\n                  "+t._s(t._f("currency")(t.sale.balance))+"\n                ")])])])])])]),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",{staticClass:"py-9 px-8"},[e("p",{staticClass:"mb-0"},[e("span",{staticClass:"font-weight-semibold"},[t._v("Return Policy: ")]),e("span",[t._v(t._s(t.$settings.return_policy))])])])],1)],1),t._v(" "),e("v-col",{attrs:{cols:"12",md:"3"}},[e("v-card",{staticClass:"invoice-options"},[e("v-card-text",[t.sale.customerId?e("v-btn",{staticClass:"mb-3",attrs:{block:"",color:"primary",to:{name:"customers.edit",params:{customerId:t.sale.customerId}}}},[t._v("\n          Customer Account\n        ")]):t._e(),t._v(" "),e("v-btn",{staticClass:"mb-3",attrs:{block:"",color:"primary"},on:{click:t.loadData}},[t._v("\n          Refresh\n        ")]),t._v(" "),e("v-btn",{staticClass:"mb-3",attrs:{block:"",color:"primary",to:{name:"sales.edit",params:{saleId:t.sale.id}}}},[t._v("\n          Edit\n        ")]),t._v(" "),e("v-btn",{staticClass:"mb-3",attrs:{block:"",color:"primary"},on:{click:function(e){t.paymentDialog=!0}}},[t._v("\n          Add Payment\n        ")]),t._v(" "),e("v-btn",{staticClass:"mb-3",attrs:{block:"",color:"error",to:"/sales"}},[t._v("\n          Cancel\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);