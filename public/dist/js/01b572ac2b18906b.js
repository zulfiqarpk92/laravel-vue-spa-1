"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[946],{4946:(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});var a=s(5714);const o={props:{customerInfo:{type:Object,default:null}},data:function(){return{showModal:!1,nameRules:[function(t){return!!t||"Name is required"},function(t){return t.length<=20||"Name must be less than 20 characters"}],emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+/.test(t)||"E-mail must be valid"}],customer:new a.ZP(this.customerInfo)}},computed:{invoicesTotal:function(){var t,e;return null!==(t=null==this||null===(e=this.customerInfo)||void 0===e||null===(e=e.invoices)||void 0===e?void 0:e.reduce((function(t,e){return t+e.totalAmount}),0))&&void 0!==t?t:0},paymentsTotal:function(){var t,e;return null!==(t=null==this||null===(e=this.customerInfo)||void 0===e||null===(e=e.payments)||void 0===e?void 0:e.reduce((function(t,e){return t+e.amount}),0))&&void 0!==t?t:0},balanceTotal:function(){return this.invoicesTotal-this.paymentsTotal}},methods:{updateUser:function(){var t=this;this.customer.put("/api/customers/"+this.customerInfo.id).then((function(e){var s=e.data;t.$store.dispatch("snackbar/showMessage",s.message),t.showModal=!1,t.$emit("customerUpdated")})).catch((function(e){e.response&&e.response.data&&t.$set(t.form,"errorMessage",e.response.data.message),console.log(e)}))}}};const i=(0,s(1900).Z)(o,(function(){var t=this,e=t._self._c;return t.customerInfo?e("v-card",{staticClass:"pt-10"},[e("v-card-title",{staticClass:"flex-column justify-center"},[e("v-avatar",{staticClass:"mb-4",attrs:{color:"grey darken-1",size:"120",rounded:""}}),t._v(" "),e("span",{staticClass:"mb-2"},[t._v(t._s(t.customerInfo.name))]),t._v(" "),e("v-chip",[t._v("\n      "+t._s(t.customerInfo.role)+"\n    ")]),t._v(" "),e("v-card-text",[e("h2",{staticClass:"text-xl font-semibold mb-2",staticStyle:{display:"flex","justify-content":"space-between"}},[t._v("\n        Customer Details\n        "),e("v-btn",{staticClass:"me-3",attrs:{color:"primary",small:""},on:{click:function(e){t.showModal=!0}}},[t._v("\n          Edit\n        ")])],1),t._v(" "),e("v-divider"),t._v(" "),e("v-list",{attrs:{dense:""}},[e("v-list-item",{staticClass:"px-0 mb-n2"},[e("v-list-item-content",[e("v-list-item-title",[e("span",{staticClass:"font-weight-medium me-2"},[t._v("Name:")]),t._v(" "),e("span",{staticClass:"text--secondary"},[t._v(t._s(t.customerInfo.name))])])],1)],1),t._v(" "),e("v-list-item",{staticClass:"px-0 mb-n2"},[e("v-list-item-content",[e("v-list-item-title",[e("span",{staticClass:"font-weight-medium me-2"},[t._v("Phone:")]),t._v(" "),e("span",{staticClass:"text--secondary"},[t._v(t._s(t.customerInfo.phone))])])],1)],1),t._v(" "),e("v-list-item",{staticClass:"px-0 mb-n2"},[e("v-list-item-content",[e("v-list-item-title",[e("span",{staticClass:"font-weight-medium me-2"},[t._v("Email:")]),t._v(" "),e("span",{staticClass:"text--secondary"},[t._v(t._s(t.customerInfo.email))])])],1)],1),t._v(" "),e("v-list-item",{staticClass:"px-0 mb-n2"},[e("v-list-item-content",[e("v-list-item-title",[e("span",{staticClass:"font-weight-medium me-2"},[t._v("Address:")]),t._v(" "),e("span",{staticClass:"text--secondary"},[t._v(t._s(t.customerInfo.address)+" "+t._s(t.customerInfo.city)+" "+t._s(t.customerInfo.province))])])],1)],1),t._v(" "),e("v-list-item",{staticClass:"px-0 mb-n2"},[e("v-list-item-content",[e("v-list-item-title",[e("span",{staticClass:"font-weight-medium me-2"},[t._v("Comments:")]),t._v(" "),e("span",{staticClass:"text--secondary"},[t._v(t._s(t.customerInfo.comments))])])],1)],1),t._v(" "),e("v-list-item",{staticClass:"px-0 mb-n2"},[e("v-list-item-content",[e("v-list-item-title",[e("span",{staticClass:"font-weight-medium me-2"},[t._v("Total Purchases:")]),t._v(" "),e("span",{staticClass:"text--secondary"},[t._v(t._s(t._f("currency")(t.invoicesTotal)))])])],1)],1),t._v(" "),e("v-list-item",{staticClass:"px-0 mb-n2"},[e("v-list-item-content",[e("v-list-item-title",[e("span",{staticClass:"font-weight-medium me-2"},[t._v("Total Payments:")]),t._v(" "),e("span",{staticClass:"text--secondary"},[t._v(t._s(t._f("currency")(t.paymentsTotal)))])])],1)],1),t._v(" "),e("v-list-item",{staticClass:"px-0 mb-n2"},[e("v-list-item-content",[e("v-list-item-title",[e("span",{staticClass:"font-weight-medium me-2"},[t._v("Balance:")]),t._v(" "),e("span",{staticClass:"text--secondary"},[t._v(t._s(t._f("currency")(t.balanceTotal)))])])],1)],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"text-h5"},[t._v("Edit Customer")])]),t._v(" "),e("v-card-text",[e("v-row",[e("v-col",{attrs:{cols:"12",md:"4"}},[e("v-text-field",{attrs:{rules:t.nameRules,"error-messages":t.customer.errors.get("name"),label:"Name",required:""},model:{value:t.customer.name,callback:function(e){t.$set(t.customer,"name",e)},expression:"customer.name"}})],1),t._v(" "),e("v-col",{attrs:{cols:"12",md:"4"}},[e("v-text-field",{attrs:{rules:t.emailRules,"error-messages":t.customer.errors.get("email"),label:"Email",required:""},model:{value:t.customer.email,callback:function(e){t.$set(t.customer,"email",e)},expression:"customer.email"}})],1),t._v(" "),e("v-col",{attrs:{cols:"12",md:"4"}},[e("v-text-field",{attrs:{"error-messages":t.customer.errors.get("phone"),label:"Phone",required:""},model:{value:t.customer.phone,callback:function(e){t.$set(t.customer,"phone",e)},expression:"customer.phone"}})],1)],1),t._v(" "),e("v-row",[e("v-col",{attrs:{cols:"12",md:"4"}},[e("v-text-field",{attrs:{"error-messages":t.customer.errors.get("address"),label:"Address",required:""},model:{value:t.customer.address,callback:function(e){t.$set(t.customer,"address",e)},expression:"customer.address"}})],1),t._v(" "),e("v-col",{attrs:{cols:"12",md:"4"}},[e("v-text-field",{attrs:{"error-messages":t.customer.errors.get("city"),label:"City",required:""},model:{value:t.customer.city,callback:function(e){t.$set(t.customer,"city",e)},expression:"customer.city"}})],1),t._v(" "),e("v-col",{attrs:{cols:"12",md:"4"}},[e("v-text-field",{attrs:{"error-messages":t.customer.errors.get("province"),label:"Province",required:""},model:{value:t.customer.province,callback:function(e){t.$set(t.customer,"province",e)},expression:"customer.province"}})],1)],1),t._v(" "),e("v-row",[e("v-col",{attrs:{cols:"12",md:"12"}},[e("v-textarea",{attrs:{label:"Comments",rows:"2"},model:{value:t.customer.comments,callback:function(e){t.$set(t.customer,"comments",e)},expression:"customer.comments"}})],1)],1),t._v(" "),e("small",{staticClass:"red--text"},[t._v("* indicates required field")])],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.showModal=!1}}},[t._v("\n              Close\n            ")]),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.updateUser}},[t._v("\n              Update\n            ")])],1)],1)],1)],1)],1)],1):e("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"card, list-item-three-line, list-item-two-line"}})}),[],!1,null,null,null).exports}}]);