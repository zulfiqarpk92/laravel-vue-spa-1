"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[55],{8055:(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});const s={layout:"default",middleware:"auth",props:{customerId:{type:[String,Number],default:"0"}},data:function(){return{customerInfo:null,ledger:null,runningCredit:0,runningBalance:0}},computed:{totalDebit:function(){return this.ledger.reduce((function(t,e){return"sale"!==e.type?t:t+e.tendered_amount}),0)},totalCredit:function(){return this.ledger.reduce((function(t,e){return"payment"!==e.type?t:t+e.tendered_amount}),0)},closingBalance:function(){return this.runningBalance}},mounted:function(){this.customerId&&this.loadData()},methods:{loadData:function(){var t=this;this.loading=!0,this.$http.get("/api/customers/"+this.customerId+"/ledger?include[]=sales&include[]=payments").then((function(e){var n=e.data;console.log(n),t.customerInfo=n.customerInfo,t.ledger=n.ledger,t.loading=!1})).catch((function(e){console.log(e),t.loading=!1}))},printReport:function(){this.$router.push(),this.$router.app.setLayout("print"),setTimeout((function(){return window.print()}),2e3)}}};const a=(0,n(1900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",[t.customerInfo?e("v-card",{attrs:{rounded:"lg"}},[e("v-card-title",{staticClass:"justify-space-between"},[e("div",[t._v("\n        "+t._s(t.customerInfo.name)+" Ledger\n      ")]),t._v(" "),e("v-btn",{staticClass:"d-print-none",attrs:{color:"primary"},on:{click:t.printReport}},[t._v("\n        Print Report\n      ")])],1),t._v(" "),e("v-row",[e("v-col",{staticClass:"px-4"},[e("v-simple-table",{staticClass:"ledger",attrs:{dense:""}},[e("thead",[e("tr",[e("th",{staticClass:"text-left",staticStyle:{width:"120px"}},[t._v("\n                Date\n              ")]),t._v(" "),e("th",{staticClass:"text-left"}),t._v(" "),e("th",{staticClass:"text-left"}),t._v(" "),e("th",{staticClass:"text-right",staticStyle:{width:"120px"}},[t._v("\n                Debit\n              ")]),t._v(" "),e("th",{staticClass:"text-right",staticStyle:{width:"120px"}},[t._v("\n                Credit\n              ")]),t._v(" "),e("th",{staticClass:"text-right",staticStyle:{width:"120px"}},[t._v("\n                Balance\n              ")])])]),t._v(" "),e("tbody",t._l(t.ledger,(function(n){return e("tr",{key:n.id},[e("td",[t._v(t._s(n.ref_date))]),t._v(" "),e("td",{staticClass:"px-0",attrs:{colspan:"2"}},["opening"===n.type?e("div",{staticClass:"opening-balance"},[t._v("\n                  ****** Opening Balance ******\n                ")]):t._e(),t._v(" "),["sale"].includes(n.type)?e("table",{staticClass:"invoice-items"},[e("tr",[e("td",{staticClass:"pl-0",attrs:{colspan:"4"}},[e("div",{staticClass:"invoice-info"},[e("div",[t._v("INV- "+t._s(n.id)+" ")]),t._v(" "),"sale"===n.type?e("div",[t._v("\n                          Sale of items on Inv # "+t._s(n.id)+" Note: "+t._s(n.comments)+"\n                        ")]):t._e()])])]),t._v(" "),t._l(n.items,(function(n){return e("tr",{key:n.id},[e("td",{staticClass:"item-name"},[t._v("\n                      "+t._s(n.name)+"\n                    ")]),t._v(" "),e("td",{staticClass:"item-quantity"},[t._v("\n                      "+t._s(t._f("showNumber")(n.quantity))+"\n                    ")]),t._v(" "),e("td",{staticClass:"item-price"},[t._v("\n                      "+t._s(t._f("currency")(n.price))+"\n                    ")]),t._v(" "),e("td",{staticClass:"item-total"},[t._v("\n                      "+t._s(t._f("currency")(n.total))+"\n                    ")])])}))],2):t._e(),t._v(" "),["payment"].includes(n.type)?e("div",{staticClass:"invoice-info"},[e("div",[t._v(" PY- "+t._s(n.id)+" ")]),t._v(" "),e("div",[t._v("\n                    Payment received: "+t._s(n.description)+"\n                  ")])]):t._e()]),t._v(" "),e("td",{staticClass:"text-right"},["sale"===n.type?e("span",[t._v(t._s(t._f("currency")(n.tendered_amount)))]):t._e()]),t._v(" "),e("td",{staticClass:"text-right"},["payment"===n.type?e("span",[t._v(t._s(t._f("currency")(n.tendered_amount)))]):t._e()]),t._v(" "),e("td",{staticClass:"text-right",class:{"font-weight-black":"opening"===n.type}},[t._v("\n                "+t._s(t._f("currency")("payment"===n.type?t.runningBalance-=n.tendered_amount:t.runningBalance+=n.tendered_amount))+"\n              ")])])})),0),t._v(" "),e("tfoot",[e("tr",[e("td"),t._v(" "),e("td"),t._v(" "),e("td"),t._v(" "),e("td",{staticClass:"text-right"},[t._v("\n                "+t._s(t._f("currency")(t.totalDebit))+"\n              ")]),t._v(" "),e("td",{staticClass:"text-right"},[t._v("\n                "+t._s(t._f("currency")(t.totalCredit))+"\n              ")]),t._v(" "),e("td",{staticClass:"text-right"})])])])],1)],1),t._v(" "),e("v-row",[e("v-col",{staticClass:"px-4 py-8 closing-balance"},[e("div",{staticClass:"pl-5"},[t._v("\n          Closing Balance:\n        ")]),t._v(" "),e("div",[t._v(t._s(t._f("currency")(t.closingBalance)))])])],1)],1):t._e()],1)}),[],!1,null,null,null).exports}}]);